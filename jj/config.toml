"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Jón Grétar Borgþórsson"
email = "jongretar@jongretar.com"

[ui]
default-command = "log"

[aliases]
push = ["util", "exec", "--", "uvx", "jj-pre-push", "push"]
tug = [
    "bookmark",
    "move",
    "--from",
    "closest_bookmark(@)",
    "--to",
    "closest_pushable(@)",
]

[revset-aliases]
# set all remote bookmarks (commits pushed to remote branches) to be immutable
'immutable_heads()' = "builtin_immutable_heads() | remote_bookmarks()"
# 'immutable_heads()' = "builtin_immutable_heads() | main@origin | (trunk().. & ~mine())"
'closest_bookmark(to)' = 'heads(::to & bookmarks())'
'closest_pushable(to)' = 'heads(::to & ~description(exact:"") & (~empty() | merges()))'
